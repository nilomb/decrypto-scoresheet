<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resizable iPhone Page with Swipe Navigation</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .top-nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      padding: 10px;
      background: #e0e0e0;
    }

    .top-nav button {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      background: #ccc;
      transition: background 0.3s, color 0.3s;
    }

    .top-nav button.active {
      background: #333;
      color: #fff;
    }

    .page-wrapper {
      flex: 1;
      position: relative;
    }

    .page-container {
      display: flex;
      width: 800%; /* 8 pages */
      height: 100%;
      transition: transform 0.3s ease;
    }

    .page {
      width: 12.5%; /* 100 / 8 */
      height: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
    }

    /* Top section */
    .top-box {
      width: 100%;
      background: #f0f0f0;
      padding: 10px;
      box-sizing: border-box;
    }

    body.them .top-box {
      background: #ddd;
      color: #000;
    }

    body.them .panel {
      border-color: #aaa;
      background: #e0e0e0;
      color: #000;
    }

    .row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .row input[type="text"] {
      flex: 1;
      margin-right: 8px;
      padding: 6px;
    }

    .row input[type="number"] {
      width: 50px;
      padding: 6px;
      margin-left: 4px;
    }

    /* Bottom section with 4 panels */
    .grid {
      flex: 1;
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 8px;
      padding: 8px;
      box-sizing: border-box;
    }

    .panel {
      display: flex;
      flex-direction: column;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
    }

    .sub-box {
      flex-grow: 1;
      overflow-y: auto;
      padding: 6px;
    }

    .sub-box.top {
      flex-basis: 80%;
    }

    .sub-box.bottom {
      flex-basis: 20%;
      border-top: 1px solid #ddd;
    }

    .input-wrapper {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
    }

    .input-wrapper input[type="text"] {
      flex: 1;
      padding: 5px;
      box-sizing: border-box;
    }

    .toggle-btn {
      margin-left: 6px;
      padding: 4px 6px;
      font-size: 12px;
      cursor: pointer;
    }

    .strikethrough {
      text-decoration: line-through;
    }

    /* Page indicator */
    .indicator {
      display: flex;
      justify-content: center;
      gap: 8px;
      padding: 8px;
      background: #fafafa;
    }

    body.them .indicator {
      background: #ccc;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #ccc;
      transition: background 0.3s;
      cursor: pointer;
    }

    .dot.active {
      background: #333;
    }
  </style>
</head>
<body>
  <div class="top-nav">
    <button id="usBtn" class="active">US</button>
    <button id="themBtn">THEM</button>
  </div>

  <div class="page-wrapper">
    <div class="page-container" id="usPages"></div>
    <div class="page-container" id="themPages" style="display:none;"></div>
  </div>

  <!-- Page indicator -->
  <div class="indicator" id="indicator"></div>

  <script>
    function createTopBox(pageIndex, mode) {
      const topBox = document.createElement('div');
      topBox.className = 'top-box';

      for (let i = 0; i < 3; i++) {
        const row = document.createElement('div');
        row.className = 'row';

        const textInput = document.createElement('input');
        textInput.type = 'text';
        textInput.placeholder = 'Text field';
        row.appendChild(textInput);

        const numberInput1 = document.createElement('input');
        numberInput1.type = 'number';
        numberInput1.min = 1;
        numberInput1.max = 4;
        row.appendChild(numberInput1);

        if (pageIndex > 1) {
          const numberInput2 = document.createElement('input');
          numberInput2.type = 'number';
          numberInput2.min = 1;
          numberInput2.max = 4;
          row.appendChild(numberInput2);
        }

        topBox.appendChild(row);
      }

      return topBox;
    }

    function createGrid() {
      const grid = document.createElement('div');
      grid.className = 'grid';
      for (let i = 0; i < 4; i++) {
        const panel = document.createElement('div');
        panel.className = 'panel';

        const topSub = document.createElement('div');
        topSub.className = 'sub-box top';
        panel.appendChild(topSub);

        const bottomSub = document.createElement('div');
        bottomSub.className = 'sub-box bottom';
        panel.appendChild(bottomSub);

        grid.appendChild(panel);
      }
      return grid;
    }

    function buildPages(containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      for (let p = 1; p <= 8; p++) {
        const page = document.createElement('div');
        page.className = 'page';

        page.appendChild(createTopBox(p));
        page.appendChild(createGrid());

        container.appendChild(page);
      }
      container.querySelectorAll('.sub-box').forEach(setupDynamicInputs);
    }

    function setupDynamicInputs(container) {
      function addInput() {
        const wrapper = document.createElement('div');
        wrapper.className = 'input-wrapper';

        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = 'Type here...';

        const button = document.createElement('button');
        button.textContent = 'âœ”';
        button.className = 'toggle-btn';

        button.addEventListener('click', () => {
          input.classList.toggle('strikethrough');
        });

        input.addEventListener('input', function () {
          if (input.value.length > 0 && !wrapper.nextElementSibling) {
            addInput();
          } else if (input.value.length === 0 && wrapper.nextElementSibling) {
            if (wrapper.nextElementSibling || wrapper.previousElementSibling) {
              wrapper.remove();
            }
          }
        });

        wrapper.appendChild(input);
        wrapper.appendChild(button);
        container.appendChild(wrapper);
      }

      addInput();
    }

    let currentPage = 0;
    let currentMode = 'us';

    window.addEventListener('DOMContentLoaded', () => {
      buildPages('usPages');
      buildPages('themPages');

      const indicator = document.getElementById('indicator');
      indicator.innerHTML = '';
      for (let i = 0; i < 8; i++) {
        const dot = document.createElement('div');
        dot.className = 'dot' + (i === 0 ? ' active' : '');
        dot.addEventListener('click', () => {
          currentPage = i;
          updatePagePosition();
          updateIndicator();
        });
        indicator.appendChild(dot);
      }

      const usBtn = document.getElementById('usBtn');
      const themBtn = document.getElementById('themBtn');

      usBtn.addEventListener('click', () => {
        document.body.classList.remove('them');
        document.getElementById('usPages').style.display = 'flex';
        document.getElementById('themPages').style.display = 'none';
        currentMode = 'us';
        currentPage = 0;
        updatePagePosition();
        updateIndicator();
        usBtn.classList.add('active');
        themBtn.classList.remove('active');
      });

      themBtn.addEventListener('click', () => {
        document.body.classList.add('them');
        document.getElementById('usPages').style.display = 'none';
        document.getElementById('themPages').style.display = 'flex';
        currentMode = 'them';
        currentPage = 0;
        updatePagePosition();
        updateIndicator();
        themBtn.classList.add('active');
        usBtn.classList.remove('active');
      });
    });

    function updatePagePosition() {
      const container = document.getElementById(currentMode + 'Pages');
      container.style.transform = `translateX(-${currentPage * 12.5}%)`;
    }

    function updateIndicator() {
      const dots = document.querySelectorAll('.dot');
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === currentPage);
      });
    }

    let startX = 0;
    window.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
    });

    window.addEventListener('touchend', (e) => {
      const endX = e.changedTouches[0].clientX;
      if (startX - endX > 50 && currentPage < 7) {
        currentPage++;
      } else if (endX - startX > 50 && currentPage > 0) {
        currentPage--;
      }
      updatePagePosition();
      updateIndicator();
    });
  </script>
</body>
</html>
